---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import ProjectCard from '../components/ProjectCard.astro';
---

<BaseLayout title="D·ª± √°n - Kant Nguy·ªÖn">
  <Navbar />
  
  <main class="min-h-screen bg-bgLight dark:bg-bgDark">
    <!-- Hero Section -->
    <section class="pt-32 md:pt-36 pb-20 bg-gradient-to-br from-primary/5 to-purple-600/5">
      <div class="max-w-4xl mx-auto px-4 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6 gradient-text">
          D·ª± √°n c·ªßa t√¥i
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Kh√°m ph√° c√°c d·ª± √°n backend, desktop v√† di ƒë·ªông m√† t√¥i ƒë√£ th·ª±c hi·ªán
        </p>
      </div>
    </section>

    <!-- Projects Grid -->
    <section class="py-16">
      <div class="max-w-6xl mx-auto px-4">
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">

          <!-- üß† E-Learning t√≠ch h·ª£p ERP Odoo -->
          <ProjectCard
            title="E-Learning t√≠ch h·ª£p ERP Odoo"
            description="H·ªá th·ªëng h·ªçc tr·ª±c tuy·∫øn E-Learning t√≠ch h·ª£p ERP Odoo cho ph√©p h·ªçc vi√™n ƒëƒÉng k√Ω kh√≥a h·ªçc, h·ªçc b√†i gi·∫£ng, l√†m b√†i ki·ªÉm tra v√† thanh to√°n MoMo. T√≠ch h·ª£p BigBlueButton ƒë·ªÉ t·ªï ch·ª©c l·ªõp h·ªçc tr·ª±c ti·∫øp v√† ERP Odoo ƒë·ªÉ qu·∫£n l√Ω t√†i ch√≠nh, h·ªçc vi√™n v√† n·ªôi dung."
            techStack={["C#", "ASP.NET Core MVC", "SQL Server", "Odoo 17", "PostgreSQL", "Bootstrap 5", "MoMo API"]}
            githubUrl="https://github.com/KhoiNguyendes23/DA_Web_HocOnline"
            imageUrl={`${import.meta.env.BASE_URL}projects/elearning.png`}
          />

          <!-- üìä Qu·∫£n l√Ω b√°n v√© m√°y bay -->
          <ProjectCard
            title="Qu·∫£n l√Ω b√°n v√© m√°y bay"
            description="Ph·∫ßn m·ªÅm desktop qu·∫£n l√Ω to√†n b·ªô quy tr√¨nh ƒë·∫∑t v√© m√°y bay, chuy·∫øn bay, nh√¢n vi√™n, t√†i kho·∫£n v√† doanh thu. H·ªó tr·ª£ x√°c th·ª±c OTP qua email, l·∫≠p l·ªãch chuy·∫øn bay, xu·∫•t b√°o c√°o doanh thu th√°ng/nƒÉm v√† bi·ªÉu ƒë·ªì th·ªëng k√™ tr·ª±c quan."
            techStack={["C#", ".NET Framework 4.6.2", "WinForms", "SQL Server", "MVVM"]}
            githubUrl="https://github.com/KhoiNguyendes23/QLMB"
            imageUrl={`${import.meta.env.BASE_URL}projects/maybay.png`}
          />

          <!-- ‚öΩ MiniClub ‚Äì ·ª®ng d·ª•ng t·ªï ch·ª©c s·ª± ki·ªán th·ªÉ thao -->
          <ProjectCard
            title="MiniClub ‚Äì ·ª®ng d·ª•ng t·ªï ch·ª©c s·ª± ki·ªán th·ªÉ thao"
            description="·ª®ng d·ª•ng di ƒë·ªông ƒëa n·ªÅn t·∫£ng gi√∫p ng∆∞·ªùi d√πng t·∫°o, qu·∫£n l√Ω v√† tham gia c√°c s·ª± ki·ªán th·ªÉ thao trong c·ªông ƒë·ªìng. Ph√°t tri·ªÉn b·∫±ng Flutter, k·∫øt n·ªëi Firebase v√† Cloudinary, h·ªó tr·ª£ th√¥ng b√°o s·ª± ki·ªán, chia s·∫ª h√¨nh ·∫£nh v√† ƒë·ªãnh v·ªã ƒë·ªãa ƒëi·ªÉm b·∫±ng Google Maps."
            techStack={["Dart", "Flutter", "Firebase", "Cloudinary", "Google Maps API"]}
            githubUrl="https://gitlab.com/khoinguyendes23-group/miniclub"
            imageUrl={`${import.meta.env.BASE_URL}projects/miniclub.png`}
          />

        </div>
      </div>
    </section>
  </main>

  <!-- Modal xem ·∫£nh l·ªõn -->
  <div id="imgModal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50 cursor-pointer">
    <img id="modalImg" class="max-w-[90vw] max-h-[90vh] rounded-lg shadow-2xl object-contain" alt="Project preview" />
  </div>

  <Footer />
</BaseLayout>

<script>
  function openImage(src: string) {
    const modal = document.getElementById("imgModal");
    const img = document.getElementById("modalImg") as HTMLImageElement;
    if (modal && img) {
      img.src = src;
      modal.classList.remove("hidden");
    }
  }

  function closeModal() {
    const modal = document.getElementById("imgModal");
    if (modal) {
      modal.classList.add("hidden");
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    // Add click handlers to all preview images
    document.querySelectorAll('img[data-preview]').forEach(img => {
      img.addEventListener('click', () => {
        const imgElement = img as HTMLImageElement;
        openImage(imgElement.src);
      });
    });

    // Close modal when clicking on it
    const modal = document.getElementById("imgModal");
    if (modal) {
      modal.addEventListener("click", closeModal);
    }
  });
</script>